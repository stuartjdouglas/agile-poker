<!DOCTYPE html>
<html>

<head>
    <title>Agile poker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/modern-css-reset@1.4.0/dist/reset.min.css"
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="styles.css">
    
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
</head>

<body>
    <div id="app">
        <div class="board">
            <h1>Scrum Poker</h1>  
            <div class="setName" v-if="!changeName">
                My name is <input v-model="name"> <button v-on:click="setName()">Set name</button>
            </div>
    
            <h1>Votes</h1>

            <div v-if="game?.votes?.length === 0">No votes yet...</div>
            <div class="voters">
                <div class="voter animate__animated animate__fadeIn" v-for="voter in game?.votes"><span class="username">{{voter.username}}</span> 
                    <span v-if="game?.concluded" class="vote">{{voter.vote}}</span>
                    <span class="vote">{{voter.vote != null ? 'voted' : 'not voted'}}</span>
                </div>
            </div>

            <button v-on:click="revealVotes()" v-if="!game.concluded">Reveal Votes</button>

    
            <div class="results" v-if="game?.concluded">
                <h2>Results</h2>
                <div class="result" v-for="vote in game?.results">
                    <span class="amount">{{vote.numOfVotes}} votes for </span>
                    <span class="vote">{{vote.vote}}</span>
                </div>
                <button v-on:click="newVote()" v-if="game.concluded">Start new vote</button>
    
            </div>
        </div>


        <div class="bottom-pane">
            <div class="cards">
                <div class="card" v-for="(vote) in votes" :class="getCardClass(vote)" v-if="name"
                    v-on:click="issueVote(vote)">
                    {{vote}}</div>
            </div>
        </div>
        
    </div>
</body>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="app.js"></script>

</html>